---
# StorageClass for NFS volumes
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: tns-nfs
provisioner: tns.csi.io
parameters:
  # Protocol to use (nfs, iscsi, nvmeof)
  protocol: "nfs"
  
  # Storage pool name where datasets will be created
  pool: "storage"
  
  # Optional: Parent dataset (defaults to pool name if not specified)
  # parentDataset: "nfs/k8s"
  
  # NFS server IP/hostname (should match your storage server)
  # Replace with your TrueNAS server IP or hostname
  server: "YOUR-TRUENAS-IP"

# Allow volume expansion (requires CSI resizer sidecar)
allowVolumeExpansion: true

# Reclaim policy: Delete or Retain
reclaimPolicy: Delete

# Volume binding mode
volumeBindingMode: Immediate

---
# StorageClass for iSCSI volumes (future implementation)
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: tns-iscsi
provisioner: tns.csi.io
parameters:
  protocol: "iscsi"
  pool: "pool1"
  # iSCSI target portal (storage server IP and port)
  # Replace with your TrueNAS server IP
  portal: "YOUR-TRUENAS-IP:3260"
  # iSCSI IQN prefix
  iqnPrefix: "iqn.2025-01.io.tns.csi"
allowVolumeExpansion: true
reclaimPolicy: Delete
volumeBindingMode: WaitForFirstConsumer

---
# StorageClass for NVMe-oF volumes
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: tns-nvmeof
provisioner: tns.csi.io
parameters:
  protocol: "nvmeof"
  pool: "storage"
  # NVMe-oF server IP/hostname (should match your storage server)
  # Replace with your TrueNAS server IP or hostname
  server: "10.10.20.100"
  # Optional: Parent dataset (defaults to pool name if not specified)
  # parentDataset: "nvmeof/k8s"
  # NVMe-oF transport (tcp or rdma)
  transport: "tcp"
  # NVMe-oF port
  port: "4420"
  # Filesystem type for block devices (ext4, ext3, or xfs)
  fsType: "ext4"
allowVolumeExpansion: false
reclaimPolicy: Delete
volumeBindingMode: WaitForFirstConsumer
