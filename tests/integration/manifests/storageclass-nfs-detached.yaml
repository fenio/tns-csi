# StorageClass for NFS with detached snapshot support
# When creating PVCs from snapshots, the clone will be promoted
# to break the parent-child relationship with the source snapshot
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: tns-csi-nfs-detached
provisioner: tns.csi.io
parameters:
  protocol: "nfs"
  pool: "${TRUENAS_POOL}"
  server: "${TRUENAS_HOST}"
  # Enable detached snapshots - clones will be promoted to be independent
  detached: "true"
allowVolumeExpansion: true
reclaimPolicy: Delete
volumeBindingMode: Immediate
